# Description
bgmc_matching solves the maximum matching problem, also known as maximum-cardinality matching problem. bgmc_matching outputs a matching that contains the largest possible number of edges. Every maximum matching is maximal, but not every maximal matching is a maximum matching. Versions of maximum matching problems arise in a num- ber of contexts and applications: from flow and neural networks, scheduling and planning, modeling bonds in chemistry, graph coloring, the stable marriage problem, to matching kidney donors to kidney donor recipients, etc. In bgmc_matching, we have two versions of program written in Java and R. The experiment is simply testing the runtime performance between these two programming languages. Results can be found in section **Maximum Matching in Bipartite Graphs** from our paper. Note: the idea of implementing maximum matching in Java is from **GeeksforGeeks**.

## Structure

* **Java** - contains all codes for java experiments
  * bgmc_macthing: a folder contains all Java code for bgmc_matching.jar
  * bgmc_matching.jar: executable jar file for experiments.
  
* **matchingRDS** - contains all RDS files necessary to the experiments. All RDS files can be reproduced by using our R program and Java program. Depending on the machine, the results of runtime performance can be varied slightly.

* **workDir** - contains txt files for Java results / any figure generated by our R program will automatically store here

* **bgmc_matching.R** - contains R code for all functions for experiments

# Instruction
Here are two examples for running the jar file and R program.

## bgmc_matching.jar

```
cd <destination_path>
java -jar bgmc_matching.jar

.. initializing PackFlix = rBed-bgmc
   date = 2021/12/15 15:16:46
   homeDir = /Users/liyixin
.. global path to rBed-bgmc
   globPath[['PackFlix']] = /Users/liyixin/Desktop/rBed_01/rBed_bgmc/bgmc_matching/Java

Please enter the folder path that contains all data file: 
% /Users/liyixin/Desktop/data 
Enter the output file name: 
% /Users/liyixin/Desktop/testResult.txt   

.. initializing runtime with 'System.currentTimeMillis' before reading
   file = /Users/liyixin/Desktop/github_temp/steiner3_045_330.cnfU
p cnfU 45 330
.. reading file completed: 215ms elapsed
.. initializing runtime with 'System.currentTimeMillis' before invoking max_bipartite_match
.. computation completed: 5ms elapsed

 thisFunction       = bgm_max_bipartite_match
 userId         = liyixin
 sysName        = Mac OS X
 dateStamp      = 2021/12/15 15:16:46
 instanceDef        = /Users/liyixin/Desktop/github_temp/steiner3_045_330.cnfU
 max_matching_size  = 45
 runtimeReadGraph   = 215ms
 runtimeGetMatch    = 5ms
..finishing here

```
In /Users/liyixin/Desktop/testResult.txt:

```
# file               = /Users/liyixin/Desktop/123.txt
# userId             = liyixin
# cpuName            = x86_64
# sysName            = Easons-MacBook-Air.local
# date               = 2021/12/15 15:16:46
# homeDir            = /Users/liyixin
# userDir            = /Users/liyixin/Desktop/rBed_01/rBed_bgmc/bgmc_matching/Java
instance,runtime_read,runtime,max_matching
steiner3_045_330.cnfU,215,5,45
```

## bgmc_matching.R
Once we install **__init_rBed_01.R** in our home directory, we can proceed the following commands in R shell or RStudio. These functions support all figures and tables in our experiments shown in section **Maximum Matching in Bipartite Graphs** in our paper.

```
  source("~/__init_rBed_01.R")
  rBedPath = glob[["rBedPath"]]  
  glob[["workDir"]] = paste0(rBedPath, "/rBed_bgmc", "/bgmc_matching", "/workDir") 
  setwd(glob[["workDir"]])
  
  instanceDirs = "../../../_data_tiny/bigraph/unate/"
  fg_bgmc_matching_experiment_R(instanceDirs, id="matrixF")
  
  instanceDef = "../../../_data_tiny/bigraph/unate/ruler_9_22.cnfU"
  fg_bgmc_matching_plot(instanceDef)
  
  javaRDS = "fg_bgmc_matching_experiment_java_56_dt.RDS"
  rRDS = "fg_bgmc_matching_experiment_R_56_dt.RDS"
  fg_bgmc_matching_experiments_plot(javaRDS, rRDS)
  
  # Here are commands for converting txt to RDS
  dt = fread("../../../_data/bigraph/unate/total/all.txt")
  dt$runtime_read = round(dt$runtime_read / 1000, 3)
  dt$runtime = round(dt$runtime / 1000, 3)
  fileRDS         = "fg_bgmc_matching_experiment_java_59_dt.RDS"
  saveRDS(dt     , fileRDS)
  cat(sep="",
      "------------------------------------------------",
      "\n   print(readRDS(\"", fileRDS, "\"))",
      "\n\n")
  
```

# Limitation
For the current version of bgmc_matching in R, we need to download the entire rBed_01 and place it on our Desktop. Mac users can easily install, while other users may need to make some modifications to the code, specifically, correcting the path in **__init_rBed_01.R** from home directory and **__lib_R_resources.R** from _lib_R in rBed_01, so that the program will execute correctly.
