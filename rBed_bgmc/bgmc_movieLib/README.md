## Description
bgmc_movieLib is from a junior-level class project, PackFlix, focusing on data structures and algorithms. In rBed_bgmc, we explored the impact of data structures on runtime performance between Java and R. The data for bgmc_movieLib, modified for educational purposes, originated with IMDb. The project objective was to not only analyze the watching histories of customers by designing a software prototype PackFlix in Java. The primary objective was to study the impact of data structures on the asymptotic runtime performance to create lists such as the top 10 most frequently watched movies. The primary input to PackFlix is a directory path to movieLib which contains file pairs of increasing size: movieRecords and watchRecords.

## Structure

* **Java** - contains all codes for java experiments
  * PackFlix_*: Java projects for PackFlix. PackFlix_ is the UI code, which all others are programs using different Map ADTs while the functionalities are the same.
  * javaADT: contains all not runnable jar version of PackFlix programs
    * Hash MultiMap and Linked Hash MultiMap from Google Guava
    * Chain Hash Map and Tree Map from net.datastructures, posted at the Brown University
    * Redblack Tree Map and Linear Probing Hash Map from CSC316 at NCSU
  * bgmc_movieLib.jar: main UI jar file that can be runnable on Terminal
    * Command: ```java -jar bgmc_movieLib.jar``` 
    
* **movieLib** - contains all instance files with two types
  * movieRecords_i.csv, where i is the number of data
    * Each row contains ID, TITLE, YEAR, RUNTIME_MINUTES, GENRES1, GENRES2, GENRES3
  * watchRecords_i.csv, where i is the number of data
    * Each row contains MOVIE_ID, WATCH_DATE ,MINUTES_WATCHED 

* **movieRDS** - contains all necessary RDS files for experiments in runtime performance between R and Java

* **workDir** - contains txt files for Java results / any figure generated by our R program will automatically store here

* **bgmc_movieLib.R** - contains R code for all functions for experiments
  * There are four groups of functions, in terms of main functions, runtime experiments, movieLib data experiments, and movieLib best 10 movies. For each function, there is a description to illustrate the functionality inside the code.
    * To reproduce our results in R shell or RStudio, simply check **all_tests_GROUP** inside the code. There are detailed commands for running the program. 
    * **For linux users, under construction...**

## Instruction
Here are two examples for running the jar file and R program.

## bgmc_movieLib.jar

```
cd <destination_path>
java -jar bgmc_movieLib.jar

.. initializing PackFlix = rBed-bgmc
   date = 2021/12/15 12:12:08
   homeDir = /Users/liyixin
.. global path to rBed-bgmc
   globPath[['PackFlix']] = /Users/liyixin/Desktop/github_temp/rBed_bgmc/bgmc_movieLib/Java

   PackFlix File Generator
A - Chain Hash
B - Hash MultiMap
C - Linked Hash MultiMap
D - Linear Probing
E - Red Black Tree
F - Tree Map

% Enter choice: A

Please enter the range of the file size
% Lower bound (2 to 20): 2
% Upper bound (2 to 20): 6

% Please enter the folder path that contains all data file: ../movieLib

Processing files in size 2^2

The 10 most frequently watched movies [
   LInferno (1911)
   The Story of the Kelly Gang (1906)
]
   Processing Chain Hash with 2^2 lines
...read time    = 0.077
...search time  = 0.007

Processing files in size 2^4

The 10 most frequently watched movies [
   Madame DuBarry (1919)
   Quo Vadis (1913)
   Atlantis (1913)
   Home Sweet Home (1914)
   LInferno (1911)
   Den sorte drAm (1911)
   Independenta Romaniei (1912)
   Ingeborg Holm (1913)
   Richard III (1912)
]
   Processing Chain Hash with 2^4 lines
...read time    = 0.026
...search time  = 0.003

Processing files in size 2^6

The 10 most frequently watched movies [
   A Fool There Was (1915)
   Assunta Spina (1915)
   Cabiria (1914)
   LInferno (1911)
   FantAmas  A lombre de la guillotine (1913)
   His Majesty the Scarecrow of Oz (1914)
   Home Sweet Home (1914)
   Judith of Bethulia (1914)
   Le faux magistrat (1914)
   Leagues Under the Sea (1916)
]
   Processing Chain Hash with 2^6 lines
...read time    = 0.047
...search time  = 0.002

% Enter the output file name: ../workDir/chainHash_2_6.txt
Files loaded successfully!

```
In ../workDir/chainHash_2_6.txt: 

```
# file               = ../workDir/chainHash_2_6.txt
# userId             = liyixin
# cpuName            = x86_64
# sysName            = Easons-MacBook-Air.local
# data_type          = ChainHash
# date               = 2021/12/15 12:14:21
# homeDir            = /Users/liyixin
# userDir            = /Users/liyixin/Desktop/github_temp/rBed_bgmc/bgmc_movieLib/Java
Size(2^x),Java_read_ChainHash,Java_search_ChainHash
2,0.077,0.007
4,0.026,0.003
6,0.047,0.002
```

## bgmc_movieLib.R
Once we install **__init_rBed_01.R** in our home directory, we can proceed the following commands in R shell or RStudio. These functions support all figures and tables in our experiments shown in section **Beyond CSC316 and Java** in our paper.

```
# Initialization
  source("~/__init_rBed_01.R")
  rBedPath = glob[["rBedPath"]]  
  glob[["workDir"]] = paste0(rBedPath, "/rBed_bgmc", "/bgmc_movieLib", "/workDir") 
  setwd(glob[["workDir"]])
  dataDir     = paste0(rBedPath, "/rBed_bgmc/bgmc_movieLib/movieLib/") 
  data_rBed_dir   = paste0(rBedPath, "/rBed_bgmc/bgmc_movieLib/movieRDS") 
  instanceDef = file.path(dataDir, "watchRecords_10.csv")
  
# Main functions
  func_bgmc_movieLib_dt_exp(instanceDir=dataDir, numberOfMovies=10, lower_bound=10, 
                            upper_bound=20, isRDS=T)
  func_bgmc_movieLib_df_exp(instanceDir=dataDir, numberOfMovies=10, lower_bound=10, 
                            upper_bound=20, isRDS=TRUE)
  movieDef = paste0(dataDir, "movieRecords_4.csv")
  watchDef = paste0(dataDir, "watchRecords_4.csv")
  func_top_movie_df(numberOfMovies=10, movieDef, watchDef)
  func_top_movie_dt(numberOfMovies=10, movieDef, watchDef)
  
# runtime experiments
  fg_bgmc_movieLib_runtime_init(data_rBed_dir)  
  fg_bgmc_movieLib_runtime_search(data_rBed_dir)
  fg_bgmc_movieLib_runtime_read(data_rBed_dir)
  fg_bgmc_movieLib_runtime_total_ab(data_rBed_dir)
  
# movieLib data experiments
  urnSizes   = c(2^(10:20))
  trialSizes = c(2^(10:20))
  rds_urn_sample_withRepl(urnSizes, trialSizes, replicateSize=100)
  fileRDS_dtPairs = file.path(data_rBed_dir, "rds_urn_sample_withRepl_20_20_100_dtPairs.RDS")
  fileRDS_dt      = file.path(data_rBed_dir, "rds_urn_sample_withRepl_20_20_100_dt.RDS")
  fg_bgmc_movieLib_data_unwatched(fileRDS_dtPairs, fileRDS_dt)
  fg_bgmc_movieLib_data_unwatched_gg(fileRDS_dtPairs, fileRDS_dt)
  fg_bgmc_movieLib_a12()
  
# movieLib best 10 movies
  fg_bgmc_movieLib_best10(instanceDef)
  fg_bgmc_movieLib_best10_occurrence(instanceDef)
```

## Limitation
For the current version of movieLib in R, we need to download the entire rBed_01 and place it on our Desktop. Mac users can easily install, while other users may need to make some modifications to the code, specifically, correcting the path in **__init_rBed_01.R** from home directory and **__lib_R_resources.R** from _lib_R in rBed_01, so that the program will execute correctly.

